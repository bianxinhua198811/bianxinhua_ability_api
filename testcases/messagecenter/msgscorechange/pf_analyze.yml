config:
    name: A登录发布提问，B登录审核后对该提问分析，C登录对该分析评分，B登录收到星数变动消息

teststeps:
-   name: A登陆发布提问
    testcase: testcases/question/add_question.yml

-   name: B登陆
    testcase: testcases/login_testcases.yml
    variables:
        phone: ${ENV(pfphone)}
        password: ${ENV(password)}

-   name: B进入待我审核页面
    api: api/question_api/audits_api.yml
    extract:
        qid: content.data.questions.0.id

-   name: B审核该问题
    api: api/question_api/auditquestion_api.yml

-   name: B对该问题分析
    api: api/question_api/isolve_api.yml
    extract:
      - sid: content.data.solution.id

-   name: 高级评分权限C登陆
    testcase: testcases/login_testcases.yml
    variables:
        phone: ${ENV(pflevelhighphone)}
        password: ${ENV(password)}
        currtime: ${make_time()}
        uuid: ${make_uuid()}
        access_token: ''
        sign: ${make_sign($currtime, $uuid,$access_token)}

-   name: C进入方案详情
    api: api/question_api/solutiondetails_api.yml

-   name: C给备选方案评分
    api: api/question_api/scoreanalyze_api.yml

-   name: B登陆
    testcase: testcases/login_testcases.yml
    variables:
        phone: ${ENV(pfphone)}
        password: ${ENV(password)}
        currtime: ${make_time()}
        uuid: ${make_uuid()}
        access_token: ''
        sign: ${make_sign($currtime, $uuid,$access_token)}

-   name: B进入查看星数变动列表
    api: api\messagecenter_api\msgscorechange_api.yml
    validate:
      - eq:
          - content.data.platformFors.0.qid
          - $qid
      - eq:
          - content.data.platformFors.0.isRead
          - 0