name: 账号登录:/v1/auth/login
base_url: ${ENV(base_url)}
#skip: "跳过"
#times: 3
variables:
    currtime: ${make_time()}
    uuid: ${make_uuid()}
    access_token: ''
    sign: ${make_sign($currtime, $uuid,$access_token)}
    phone: ${ENV(ckphone)}
#获取authcode
teardown_hooks:
        - ${teardown_hook_get_authcode($response)}
#export:
#    - auth_code

request:
    headers:
        Content-Type: application/json;charset=utf-8
        User-Agent: okhttp/3.12.3
        X-MMM-AccessToken: $access_token
        X-MMM-AppName: com.mmm.ability
        X-MMM-AppProject: ability
        X-MMM-DeviceType: '1'
        X-MMM-Sign: $sign
        X-MMM-Timestamp: $currtime
        X-MMM-Uuid: $uuid
        X-MMM-Version: 0.4.0
    json:
        clientId: lks3Z8Ncn2j
        grantType: signInPassword
        password: 7c4a8d09ca3762af61e59520943dc26494f8941b
        phone: $phone
    method: POST
    url: /v1/auth/login
#extract:
#    auth_code: content.data.authCode
validate:
-   eq:
    - content.code
    - 0
-   eq:
    - content.msg
    - 登录成功